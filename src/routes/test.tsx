import { createSignal, onMount } from "solid-js";
import { Button } from "~/components/ui/Button";
import { StrokeAnimator } from "~/util/strokeAnimator";

export default function Test() {
  let svg: SVGSVGElement;

  const [animator, setAnimator] = createSignal<StrokeAnimator>();

  onMount(() => {
    setAnimator(new StrokeAnimator(svg));
  });

  return (
    <div>
      <Button onClick={() => animator()?.animatePath()}>Animate</Button>
      <svg ref={svg} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40">
        <defs>
          <clipPath id="a">
            <path d="M83.07 158.7q3.52 0 6.96-.2t6.6-.6q3.2-.4 6-1.05l.04 2.96q-2.16.36-4.68.68-2.48.28-5.08.52-2.6.2-5.12.32t-4.76.12q-.84 0-2.04-.04-1.2-.08-2.4-.12l-2.04-.12-.08-3q.72.12 1.96.24t2.52.2q1.28.08 2.12.08z" />
          </clipPath>
          <clipPath id="b">
            <path d="M89.55 153.73q-.16.36-.28.88-.08.48-.2.92-.32 1.64-.64 4.16-.32 2.52-.52 5.4-.2 2.84-.2 5.6 0 2.56.32 5 .36 2.44.88 4.68.56 2.2 1.16 4.08l-2.88.88q-.6-1.8-1.12-4.16-.52-2.4-.84-5-.32-2.64-.32-5.16 0-2.08.12-4.24.16-2.16.36-4.2l.36-3.88.36-3.12.08-1.04q.04-.52 0-.88z" />
          </clipPath>
          <clipPath id="c">
            <path d="M99.75 163.37c-.08.16-.17.39-.28.68-.08.27-.17.55-.28.84l-.24.76c-.8 2.46-1.76 4.71-2.88 6.76a36.44 36.44 0 0 1-3.64 5.44 25.57 25.57 0 0 1-4.04 3.96c-1.3.99-2.72 1.82-4.24 2.48-1.52.67-2.99 1-4.4 1-.85 0-1.64-.18-2.36-.56a4.17 4.17 0 0 1-1.72-1.68 5.58 5.58 0 0 1-.64-2.8c0-1.36.3-2.7.88-4.04a15.38 15.38 0 0 1 2.4-3.84 20.1 20.1 0 0 1 7.76-5.52l.12 2.8c-1.5.67-2.87 1.56-4.12 2.68a14.26 14.26 0 0 0-2.92 3.64 7.64 7.64 0 0 0-1.08 3.76c0 .83.19 1.46.56 1.88.4.4.97.6 1.72.6.99 0 2.1-.28 3.32-.84a15.51 15.51 0 0 0 3.84-2.56 28.94 28.94 0 0 0 4.96-5.68 27.32 27.32 0 0 0 3.84-8.96 48.86 48.86 0 0 0 .28-1.6z" />
          </clipPath>
          <clipPath id="d">
            <path d="M86.07 166.85a27.28 27.28 0 0 1 8.48-1.6c2.53 0 4.72.44 6.56 1.32a10.1 10.1 0 0 1 4.24 3.6 8.77 8.77 0 0 1 1.52 5.04c0 1.44-.25 2.82-.76 4.12-.48 1.31-1.25 2.51-2.32 3.6a13.64 13.64 0 0 1-4.04 2.76 22.55 22.55 0 0 1-5.96 1.72l-1.72-2.68c2.43-.24 4.5-.8 6.24-1.68 1.73-.88 3.08-2 4.04-3.36a7.85 7.85 0 0 0 1.44-4.64c0-1.3-.36-2.5-1.08-3.6a7.62 7.62 0 0 0-3.16-2.64 11.02 11.02 0 0 0-5.04-1.04c-1.68 0-3.24.2-4.68.6-1.41.4-2.63.83-3.64 1.28l-.12-2.8z" />
          </clipPath>
        </defs>
        <g style="fill:none;stroke:#000;stroke-width:4;">
          <path
            d="M76.05 159.5c9.48 1.06 15.04.3 27.23-1.28"
            clip-path="url(#a)"
            transform="translate(-70.67 -150.21)"
          />
          <path
            d="M87.97 153.07c-2.29 14.74-2.43 21.4.82 32.22"
            clip-path="url(#b)"
            transform="translate(-70.67 -150.21)"
          />
          <g>
            <path
              d="M98.36 162.64c-5.3 20.37-23.4 27.1-22 16.4.46-3.57 4.03-8.92 10.3-10.6"
              clip-path="url(#c)"
              transform="translate(-70.67 -150.21)"
            />
            <path
              d="M85.57 168.3c9.54-4.44 16.68-.12 18.5 3 3.6 6.2-1.01 13.78-12.07 15.03"
              clip-path="url(#d)"
              transform="translate(-70.67 -150.21)"
            />
          </g>
        </g>
      </svg>
    </div>
  );
}
